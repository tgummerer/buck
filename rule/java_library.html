<!doctype html><html xmlns="http://www.w3.org/1999/xhtml"><head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns#"><title>Buck: java_library()</title><link type="image/png" rel="shortcut icon" href="/buck/static/favicon.png" /><meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=no" /><meta http-equiv="content-type" content="text/html;charset=utf-8"><link type="text/css" rel="stylesheet" href="/buck/google-code-prettify/prettify.css" ><link type="text/css" rel="stylesheet" href="/buck/static/buck.css"><script>(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o), m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','//www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-40185670-1', 'github.io'); ga('send', 'pageview');</script><meta property="og:locale" content="en_US"><meta property="og:title" content="java_library()"><meta property="og:site_name" content="Buck: a build tool"><meta property="og:image" content="http://facebook.github.io/buck/static/og.png"><meta property="og:type" content="article"><meta property="og:description" content="A rule that is used to define a set of Java files that can be compiled together."><meta property="fb:admins" content="584556688222168"></head><body><div id="fb-root"></div><script>(function(d, s, id) {var js, fjs = d.getElementsByTagName(s)[0]; if (d.getElementById(id)) return; js = d.createElement(s); js.id = id; js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=584556688222168"; fjs.parentNode.insertBefore(js, fjs);}(document, 'script', 'facebook-jssdk'));</script><header class='topbar'><nav class='width'><a href='http://facebook.github.io/buck/'><h1>Buck</h1></a><ul class='menu'><li><a href='/buck/setup/quick_start.html'>Get Started</a><li><a href='https://groups.google.com/forum/#!forum/buck-build'>Group</a><li><a href='/buck/javadoc/'>API</a><li><a href='https://github.com/facebook/buck'>GitHub</a></ul></nav></header><section class='content'><div class='width'><article><h1>java_library()</h1><div class="overview">A <code>java_library()</code> rule is used to define a set of Java files that can be compiled together. The main output of a <code>java_library()</code> rule is a single JAR file containing all of the compiled class files and resources.<h2>Arguments</h2><ul class="arglist"><li class="arg"><code>name</code> (required) The name of the rule.<li class="arg"><code>srcs</code> (defaults to <code>[]</code>) The set of <code>.java</code> files to compile for this rule. If any of the files in this list end in <code>.src.zip</code>, then the entries in the ZIP file that end in <code>.java</code> will be included as ordinary inputs to compilation. This is common when using a <a href="/buck/rule/genrule.html"><code>genrule</code></a> to auto-generate some Java source code that needs to be compiled with some hand-written Java code.<li class="arg"><code>resources</code> (defaults to <code>[]</code>) Static files to include among the compiled <code>.class</code> files. These files can be loaded via <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getResource(java.lang.String)" target="_blank">Class.getResource()</a>.<p><strong>Note:</strong> If <code>resources_root</code> isn't set, Buck uses the <code>src_roots</code> property in <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a> to help determine where resources should be placed within the generated JAR file.<p><li class="arg"><code>resources_root</code> (defaults to <code>None</code>) The path that resources are resolved against. For example, if <code>resources_root</code> is <code>"res"</code> and <code>resources</code>  contains the file <code>"res/com/example/foo.txt"</code>, that file will end up as <code>"com/example/foo.txt"</code> in the output JAR. This parameter overrides the <code>src_roots</code> property in <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a>.<li class="arg"><code>deps</code> (defaults to <code>[]</code>) Rules (usually other <code>java_library</code> rules) that are used to generate the classpath required to compile this <code>java_library</code>.<li class="arg"><code>source</code> (defaults to <code>&lt;global value&gt;</code>) Specifies the version of Java (as a string) to interpret source files as. Overrides the value in "source_level" in the "java" section of <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a>.<li class="arg"><code>target</code> (defaults to <code>&lt;global value&gt;</code>) Specifies the version of Java (as a string) for which to generate code. Overrides the value in "target_level" in the "java" section of <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a>.<li class="arg"><code>javac</code> (defaults to <code>&lt;global value&gt;</code>) Specifies the Java compiler program to use for this rule. The value is a source path (e.g., Only one of "javac" and "javac_jar" may be set for a given rule. Overrides the value in "javac" in the "tools" section of <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a>.<li class="arg"><code>javac_jar</code> (defaults to <code>&lt;global value&gt;</code>) Specifies the Java compiler program to use for this rule. The value is a source path (e.g., Only one of "javac_jar" and "javac" may be set for a given rule. Overrides the value in "javac_jar" in the "tools" section of <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a>.<li class="arg"><code>extra_arguments</code> (defaults to <code>[]</code>) List of additional arguments to pass into the Java compiler.  These arguments follow the ones specified in <a href="/buck/concept/buckconfig.html"><code>.buckconfig</code></a>.<li class="arg"><code>exported_deps</code> (defaults to <code>[]</code>) Other <code>java_library</code> rules that depend on this rule will also include its <code>exported_deps</code> in their classpaths. This is useful when the public API of a rule has return types or checked exceptions that are defined in another rule, which would otherwise require callers to add an extra dependency. It's also useful for exposing e.g. a collection of <code>prebuilt_jar</code> rules as a single target for callers to depend on. Targets in <code>exported_deps</code> are implicitly included in the <code>deps</code> of this rule, so they don't need to be repeated there.<li class="arg"><code>provided_deps</code> (defaults to <code>[]</code>) These represent dependencies that are known to be provided at run time, but are required in order for the code to compile. Examples of <code>provided_deps</code> include the JEE servlet APIs. When this rule is included in a <code>java_binary</code>, the <code>provided_deps</code> will not be packaged into the output.<li class="arg"><code>visibility</code> (defaults to <code>[]</code>) List of <a href="/buck/concept/build_target_pattern.html">build target patterns</a> that identify the build rules that can include this rule in its <code>deps</code>.</ul><h2>Examples</h2><pre class="prettyprint lang-py">
# A rule that compiles a single .java file.
java_library(
  name = 'JsonUtil',
  srcs = ['JsonUtil.java'],
  deps = [
    '//third_party/guava:guava',
    '//third_party/jackson:jackson',
  ],
)

# A rule that compiles all of the .java files under the directory in
# which the rule is defined using glob(). It also excludes an
# individual file that may have additional dependencies, so it is
# compiled by a separate rule.
java_library(
  name = 'messenger',
  srcs = glob(['**/*.java'], excludes = ['MessengerModule.java']),
  deps = [
    '//src/com/facebook/base:base',
    '//third_party/guava:guava',
  ],
)

java_library(
  name = 'MessengerModule',
  srcs = ['MessengerModule.java'],
  deps = [
    '//src/com/facebook/base:base',
    '//src/com/google/inject:inject',
    '//third_party/guava:guava',
    '//third_party/jsr-330:jsr-330',
  ],
)

# A rule that builds a library with both relative and
# fully-qualified deps.
java_library(
  name = 'testutil',
  srcs = glob(['tests/**/*.java'], excludes = 'tests/**/*Test.java'),
  deps = [
    ':lib-fb4a',
    '//java/com/facebook/base:base',
  ],
)
</pre></div></article><nav><h3>Getting Started</h3><ul><li><a href="/buck/">Overview</a><li><a href="/buck/setup/quick_start.html">Quick Start</a><li><a href="/buck/setup/install.html">Downloading and Installing Buck</a><li><a href="/buck/article/exopackage.html">Exopackage</a></ul><h3>About</h3><ul><li><a href="/buck/concept/what_makes_buck_so_fast.html">What Makes Buck so Fast?</a><li><a href="/buck/concept/troubleshooting.html">Troubleshooting</a><li><a href="/buck/about/performance_tuning.html">Performance Tuning</a><li><a href="/buck/concept/faq.html">FAQ</a><li><a href="/buck/presentations/">Learn More (Buck Presentations)</a></ul><h3>Concepts</h3><ul><li><a href="/buck/concept/build_rule.html">Build Rule</a><li><a href="/buck/concept/build_target.html">Build Target</a><li><a href="/buck/concept/build_file.html">Build File</a><li><a href="/buck/concept/buckversion.html">.buckversion</a><li><a href="/buck/concept/nobuckcheck.html">.nobuckcheck</a><li><a href="/buck/concept/buckconfig.html">.buckconfig</a><li><a href="/buck/concept/build_target_pattern.html">Build Target Pattern</a><li><a href="/buck/concept/visibility.html">Visibility</a><li><a href="/buck/concept/http_cache_api.html">HTTP Cache API</a></ul><h3>Build Rules</h3><ul><li><a href="/buck/rule/android_aar.html">android_aar()</a><li><a href="/buck/rule/android_binary.html">android_binary()</a><li><a href="/buck/rule/android_build_config.html">android_build_config()</a><li><a href="/buck/rule/android_library.html">android_library()</a><li><a href="/buck/rule/android_prebuilt_aar.html">android_prebuilt_aar()</a><li><a href="/buck/rule/android_resource.html">android_resource()</a><li><a href="/buck/rule/apk_genrule.html">apk_genrule()</a><li><a href="/buck/rule/cxx_binary.html">cxx_binary()</a><li><a href="/buck/rule/cxx_library.html">cxx_library()</a><li><a href="/buck/rule/cxx_test.html">cxx_test()</a><li><a href="/buck/rule/d_binary.html">d_binary()</a><li><a href="/buck/rule/d_library.html">d_library()</a><li><a href="/buck/rule/d_test.html">d_test()</a><li><a href="/buck/rule/gen_aidl.html">gen_aidl()</a><li><a href="/buck/rule/genrule.html">genrule()</a><li><a href="/buck/rule/java_binary.html">java_binary()</a><li><a href="/buck/rule/java_library.html">java_library()</a><li><a href="/buck/rule/java_test.html">java_test()</a><li><a href="/buck/rule/keystore.html">keystore()</a><li><a href="/buck/rule/ndk_library.html">ndk_library()</a><li><a href="/buck/rule/prebuilt_jar.html">prebuilt_jar()</a><li><a href="/buck/rule/prebuilt_native_library.html">prebuilt_native_library()</a><li><a href="/buck/rule/project_config.html">project_config()</a><li><a href="/buck/rule/python_binary.html">python_binary()</a><li><a href="/buck/rule/python_library.html">python_library()</a><li><a href="/buck/rule/python_test.html">python_test()</a></ul><h3>Functions</h3><ul><li><a href="/buck/function/glob.html">glob()</a><li><a href="/buck/function/include_defs.html">include_defs()</a><li><a href="/buck/function/string_parameter_macros.html">String Parameter Macros</a></ul><h3>Commands</h3><ul><li><a href="/buck/command/audit.html">buck audit</a><li><a href="/buck/command/build.html">buck build</a><li><a href="/buck/command/clean.html">buck clean</a><li><a href="/buck/command/install.html">buck install</a><li><a href="/buck/command/project.html">buck project</a><li><a href="/buck/command/quickstart.html">buck quickstart</a><li><a href="/buck/command/server.html">buck server</a><li><a href="/buck/command/targets.html">buck targets</a><li><a href="/buck/command/test.html">buck test</a><li><a href="/buck/command/uninstall.html">buck uninstall</a><li><a href="/buck/command/buckd.html">buckd</a></ul><h3>Extending Buck</h3><ul><li><a href="/buck/extending/macros.html">Custom Macros</a><li><a href="/buck/extending/rules.html">Custom Rules</a></ul><h3>Contributing to Buck</h3><ul><li><a href="https://groups.google.com/group/buck-build">Discussion Group</a><li><a href="https://github.com/facebook/buck/issues/new">Report a Bug</a><li><a href="/buck/contributing/tour.html">Tour of the Codebase</a><li><a href="/buck/contributing/development.html">Development Workflow</a><li><a href="/buck/contributing/codestyle.html">Code Style</a><li><a href="/buck/contributing/logging.html">Logging</a><li><a href="/buck/contributing/immutables.html">Immutable Value Types</a><li><a href="/buck/javadoc">API</a><li><a href="https://github.com/facebook/buck">Browse the Source Code</a></ul></ul></nav></div></section><footer><div class='width'>&copy; Copyright Facebook, 2013 -</div></footer><script src="/buck/google-code-prettify/prettify.js"></script><script>prettyPrint()</script></body></html>